
```{r}
library(shiny)
library(leaflet)
library(rjson)
library(jsonlite)
library(scales)
library(RColorBrewer)
library(readr)
library(tidyverse)
```

```{r}
election_data_combined <- read_csv("data for app/election_data_wide_geo.csv")
election_data_combined <- election_data_wide_geo

#change data type to numeric
election_data_combined$Lat <- as.numeric(as.character(election_data_combined$Lat))
election_data_combined$Long <- as.numeric(as.character(election_data_combined$Long))

```


```{r}
    selected_county <- filter(election_data_combined, County == "MECKLENBURG")
    pal_colors <- colorNumeric("Purples", domain = election_data_combined$Votes_REP)

  map <- leaflet(data = selected_county) |>
        addTiles() |> 
        addPolygons(
        fillColor = ~pal_colors(Votes_REP),
        fillOpacity = 0.5,
        color = "black",
        weight = 2,
        popup = ~paste("Republican Votes: ", Votes_REP),
        label = ~paste("Republican Votes: ", Votes_REP)
      ) |>
      setView(lng = selected_county$Long, lat = selected_county$Lat, zoom = 8)
  )
  
  map
```

